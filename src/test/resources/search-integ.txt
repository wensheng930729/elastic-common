agex.source={"aliases":{"agex":{}},"settings":{"analysis":{"analyzer":{"allAnalyzer":{"filter":["lowercase","asciifolding"],"tokenizer":"whitespace","type":"custom"},"alphaAnalyzer":{"char_filter":["alphaonly"],"filter":["lowercase","asciifolding"],"tokenizer":"keyword","type":"custom"},"autoCompleteAnalyzer":{"filter":["lowercase","autocomplete"],"tokenizer":"whitespace","type":"custom"},"default":{"type":"standard"},"normAnalyzer":{"filter":["lowercase","asciifolding"],"tokenizer":"keyword","type":"custom"},"numAnalyzer":{"char_filter":["digitonly","zeroremove"],"tokenizer":"keyword","type":"custom"},"pathAnalyzer":{"filter":["lowercase"],"tokenizer":"path_hierarchy"}},"char_filter":{"alphaonly":{"pattern":"[^\\pL]","type":"pattern_replace"},"digitonly":{"pattern":"[^\\d]","type":"pattern_replace"},"zeroremove":{"pattern":"\\b0+","type":"pattern_replace"}},"filter":{"autocomplete":{"max_gram":"20","min_gram":"1","type":"edge_ngram"}}},"auto_expand_replicas":"0-all","mapper.dynamic":false,"mapping.ignore_malformed":true,"number_of_shards":1},"mappings":{"_doc":{"dynamic":"strict","_all":{"enabled":false},"_source":{"excludes":["&all","&autoComplete"]},"properties":{"&all":{"type":"text","analyzer":"allAnalyzer"},"&ancestor":{"type":"keyword"},"&autoComplete":{"type":"text","analyzer":"autoCompleteAnalyzer"},"&expiry":{"type":"date"},"&id":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}}},"&key":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}}},"&link":{"type":"keyword"},"&model":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}}},"&parent":{"type":"keyword"},"&seriesRefFqn":{"type":"keyword"},"&status":{"type":"keyword"},"&size":{"type":"long"},"&timestamp":{"type":"date"},"&traitFqn":{"type":"keyword"},"&traitId":{"type":"keyword"},"&uniqueProps":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}}},"&updater":{"type":"keyword"},"&user":{"type":"keyword"},"city":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"country":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"date":{"type":"date","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"exchange":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"legs":{"type":"nested","properties":{"amount":{"type":"double","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"legnum":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"product":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"qty":{"type":"integer","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]}}},"region":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"tradeId":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"trader":{"type":"keyword","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]},"value":{"type":"double","fields":{"text":{"type":"text","analyzer":"normAnalyzer"}},"copy_to":["&all"]}}}}}
text.query={"size":10,"sort":["&id"],"query":{"prefix":{"value.text":"2"}}}
text.response=[{"&id":"3861acee-de0a-ed04-5fad-746abf7b03ee","city":"London","country":"UK","date":"2015-01-25T00:00Z","exchange":"LME","region":"EMEA","tradeId":"trades:005","trader":"Chandler","value":20.0},{"&id":"634e6b69-0a5e-ee8d-6d78-3b59a2027223","city":"Geneva","country":"CH","date":"2015-01-25T00:00Z","exchange":"IEU","legs":[{"amount":6.0,"legnum":"leg:008:001","product":"b","qty":6},{"amount":6.0,"legnum":"leg:008:002","product":"c","qty":6},{"amount":4.0,"legnum":"leg:008:003","product":"d","qty":4}],"region":"EMEA","tradeId":"trades:008","trader":"Ellott","value":20.0},{"&id":"758e633c-00c4-197c-e4a4-b14344756eec","city":"Stamford","country":"US","date":"2015-01-10T00:00Z","exchange":"IUS","legs":[{"amount":12.5,"legnum":"leg:012:001","product":"d","qty":5},{"amount":4.25,"legnum":"leg:012:002","product":"a","qty":2},{"amount":3.25,"legnum":"leg:012:003","product":"b","qty":2}],"region":"NA","tradeId":"trades:012","trader":"Longfellow","value":20.0},{"&id":"922088f2-d173-7e60-f5b2-87685007a34b","city":"London","country":"UK","date":"2015-02-15T00:00Z","exchange":"NYM","legs":[{"amount":15.0,"legnum":"leg:004:001","product":"d","qty":5},{"amount":5.0,"legnum":"leg:004:002","product":"a","qty":2},{"amount":5.0,"legnum":"leg:004:003","product":"b","qty":3}],"region":"EMEA","tradeId":"trades:004","trader":"Charlie","value":25.0},{"&id":"a9fbb25b-0063-aea2-6b72-adc0c0a18c56","city":"London","country":"UK","date":"2015-03-04T00:00Z","exchange":"IEU","region":"EMEA","tradeId":"trades:001","trader":"Alex","value":20.0}]
agg1.query={"size":0,"aggs":{"sum_values":{"sum":{"field":"value"}}}}
agg2.query={"size":0,"aggs":{"avg_values":{"avg":{"field":"value"}}}}
agg3.query={"size":0,"aggs":{"min_values":{"min":{"field":"value"}}}}
agg4.query={"size":0,"aggs":{"max_values":{"max":{"field":"value"}}}}
agg5.query={"size":0,"aggs":{"count_values":{"value_count":{"field":"value"}}}}
agg6.query={"size":0,"aggs":{"stats_values":{"stats":{"field":"value"}}}}
agg7.query={"size":0,"aggs":{"stats_values":{"extended_stats":{"field":"value"}}}}
agg8.query={"size":0,"aggs":{"regions":{"terms":{"field":"region"}}}}
agg9.query={"size":0,"aggs":{"dates":{"date_histogram":{"field":"date","interval":"month"}}}}
agg10.query={"size":0,"aggs":{"londons":{"filter":{"terms":{"city":["London","Stamford"]}},"aggs":{"cities":{"terms":{"field":"city"}}}}}}
agg11.query={"size":0,"aggs":{"legs":{"nested":{"path":"legs"},"aggs":{"max_qty":{"max":{"field":"legs.qty"}}}}}}
agg12.query={"size":0,"aggs":{"legs":{"nested":{"path":"legs"},"aggs":{"top_legs":{"terms":{"field":"legs.product"},"aggs":{"comment_to_issue":{"reverse_nested":{},"aggs":{"top_legs_per_country":{"terms":{"field":"country"}}}}}}}}}}
agg13.query={"query":{"bool":{"must":{"match":{"tradeId":"trades:001"}}}},"size":0,"aggs":{"region":{"terms":{"field":"region"},"aggs":{"legs":{"nested":{"path":"legs"},"aggs":{"top_legs":{"terms":{"field":"legs.product"},"aggs":{"comment_to_issue":{"reverse_nested":{},"aggs":{"top_legs_per_country":{"terms":{"field":"country"}}}}}}}}}}}}
agg14.query={"size":0,"aggs":{"card_values":{"cardinality":{"field":"value"}}}}
agg1.result={"sum_values":{"value":381.0}}
agg2.result={"avg_values":{"value":23.8125}}
agg3.result={"min_values":{"value":10.0}}
agg4.result={"max_values":{"value":50.0}}
agg5.result={"count_values":{"value":16}}
agg6.result={"stats_values":{"avg":23.8125,"count":16,"max":50.0,"min":10.0,"sum":381.0}}
agg7.result={"stats_values":{"avg":23.8125,"count":16,"max":50.0,"min":10.0,"std_deviation":12.802435071110496,"std_deviation_bounds":{"lower":-1.7923701422209923,"upper":49.41737014222099},"sum":381.0,"sum_of_squares":11695.0,"variance":163.90234375}}
agg8.result={"regions":{"buckets":[{"doc_count":11,"key":"EMEA"},{"doc_count":5,"key":"NA"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}}
agg9.result={"dates":{"buckets":[{"doc_count":6,"key":1420070400000,"key_as_string":"2015-01-01T00:00:00.000Z"},{"doc_count":4,"key":1422748800000,"key_as_string":"2015-02-01T00:00:00.000Z"},{"doc_count":6,"key":1425168000000,"key_as_string":"2015-03-01T00:00:00.000Z"}]}}
agg10.result={"londons":{"cities":{"buckets":[{"doc_count":7,"key":"London"},{"doc_count":3,"key":"Stamford"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0},"doc_count":10}}
agg11.result={"legs":{"doc_count":24,"max_qty":{"value":20.0}}}
agg12.result={"legs":{"doc_count":24,"top_legs":{"buckets":[{"comment_to_issue":{"doc_count":6,"top_legs_per_country":{"buckets":[{"doc_count":3,"key":"UK"},{"doc_count":2,"key":"US"},{"doc_count":1,"key":"CH"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}},"doc_count":6,"key":"a"},{"comment_to_issue":{"doc_count":6,"top_legs_per_country":{"buckets":[{"doc_count":2,"key":"CH"},{"doc_count":2,"key":"UK"},{"doc_count":2,"key":"US"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}},"doc_count":6,"key":"b"},{"comment_to_issue":{"doc_count":6,"top_legs_per_country":{"buckets":[{"doc_count":2,"key":"CH"},{"doc_count":2,"key":"UK"},{"doc_count":2,"key":"US"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}},"doc_count":6,"key":"c"},{"comment_to_issue":{"doc_count":6,"top_legs_per_country":{"buckets":[{"doc_count":3,"key":"US"},{"doc_count":2,"key":"UK"},{"doc_count":1,"key":"CH"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}},"doc_count":6,"key":"d"}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}}}
agg13.result={"region":{"buckets":[{"doc_count":1,"key":"EMEA","legs":{"doc_count":0,"top_legs":{"buckets":[],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}}}],"doc_count_error_upper_bound":0,"sum_other_doc_count":0}}
agg14.result={"card_values":{"value":11}}
agg1.flat={"sum_values":[[381.0]]}
agg2.flat={"avg_values":[[23.8125]]}
agg3.flat={"min_values":[[10.0]]}
agg4.flat={"max_values":[[50.0]]}
agg5.flat={"count_values":[[16]]}
agg6.flat={"stats_values":[[23.8125,16,50.0,10.0,381.0]]}
agg7.flat={"stats_values":[[23.8125,16,50.0,10.0,12.802435071110496,381.0,11695.0,163.90234375]]}
agg8.flat={"regions":[["EMEA",11],["NA",5]]}
agg9.flat={"dates":[["2015-01-01T00:00:00.000Z",6],["2015-02-01T00:00:00.000Z",4],["2015-03-01T00:00:00.000Z",6]]}
agg10.flat={"londons":[["londons","London",7],["londons","Stamford",3]]}
agg11.flat={"legs":[["legs",20.0]]}
agg12.flat={"legs":[["legs","a","comment_to_issue","UK",3],["legs","a","comment_to_issue","US",2],["legs","a","comment_to_issue","CH",1],["legs","b","comment_to_issue","CH",2],["legs","b","comment_to_issue","UK",2],["legs","b","comment_to_issue","US",2],["legs","c","comment_to_issue","CH",2],["legs","c","comment_to_issue","UK",2],["legs","c","comment_to_issue","US",2],["legs","d","comment_to_issue","US",3],["legs","d","comment_to_issue","UK",2],["legs","d","comment_to_issue","CH",1]]}
agg13.flat={"region":[["EMEA","legs","top_legs",0]]}
agg14.flat={"card_values":[[11]]}